<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>{% block title %}{% endblock %}</title>

	<meta name="description" content="Chanjo Report: coverage report generator">
	<meta name="author" content="Robin Andeer">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- place 'favicon.ico' + 'apple-touch-icon.png' in the root directory -->
	<link rel="Shortcut Icon"
				href="{{ url_for('static', filename='favicon.png') }}"
				type="image/x-icon">

	{% block css %}
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://bootswatch.com/simplex/bootstrap.min.css">

		<!-- Customizations -->
		<link rel="stylesheet" type="text/css" href="{{ url_for('report.static', filename='main.css') }}">
	{% endblock %}

	{% block css_style %}{% endblock %}

	{% block js_top %}
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	{% endblock %}
</head>
<body>
	{% block body %}
		<nav class="navbar navbar-default">
			<div class="container">
					<div class="navbar-header">
						<span class="navbar-brand">
							Chanjo Report
						</span>
					</div>
			</div>
		</nav>

    <div class="container">
		<div class="panel-group hidden-print" id="filter-accordion">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a role="button" data-toggle="collapse" data-parent="#accordion" href="#view-filters">Customize</a>
					</h4>
				</div>

				<div id="view-filters" class="panel-collapse collapse">
					<div class="panel-body">
						<form method="POST" action="{{ url_for('report.pdf' if pdf else 'report.report') }}">
              <div class="{% if hidden %}navbar-form{% endif %}">
                <div class="form-group">
                  <div class="row" {% if hidden %}hidden{% endif %}>
                    <div class="col-xs-6">
                      <label class="control-label">Completeness cutoff</label>
                      <select class="form-control" name="level">
                        {% for level, _ in levels.items() %}
                          <option value="{{ level }}" {% if level == extras.level %} selected {% endif %}>{{ level }}x</option>
                        {% endfor %}
                      </select>
                    </div>

                    <div class="col-xs-6">
                      <label class="control-label">Gene panel name to <i>display</i></label>
                      <input class="form-control" name="panel_name" type="text" placeholder="Skeletal dysplasia 3.2" value="{{ extras.panel_name or '' }}">
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <div class="row" {% if hidden %}hidden{% endif %}>
                    <div class="col-xs-7">
                      <label class="control-label">Included genes</label>
                      <div><input class="form-control" type="text" name="gene_ids" value="{{ extras.gene_ids|join(', ') }}" placeholder="ADK,GIT"></div>
                    </div>

                    <div class="col-xs-3">
                      <label class="control-label">Show genes</label>
                      <div><input type="checkbox" name="show_genes" {% if extras.show_genes %}checked{% endif %}></div>
                    </div>

                    <div class="col-xs-2">
                      <label class="control-label">&nbsp;</label>
                      <button class="btn btn-default form-control" type="submit">Update</button>
                    </div>
                  </div>
                </div>

                {% for sample_id in sample_ids %}
                  <input type="text" name="sample_id" value="{{ sample_id }}" hidden>
                {% endfor %}

                {% if hidden %}
                  <button class="btn btn-link navbar-btn" type="submit">PDF</button>
                {% endif %}
              </div>
            </form>
					</div>
				</div>
			</div>
		</div>

		{% if gene_id_errors %}
			<span style="background-color:#d9534f;color:white;">Gene list should contain comma-separated HGNC numerical identifiers, not strings. Unsupported gene identifiers: {{gene_id_errors}} were not taken into account.</span>
		{% endif %}

		<h2>{{ _('Quality report') }}: {{ _('clinical sequencing') }}</h2>
		{% if extras.panel_name %}
			<p>{{ _('Based on gene panel') }}: <strong>{{ extras.panel_name }}</strong></p>
		{% endif %}
      
	  </div>

	{% endblock %}

	{% block js_btm %}
		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	{% endblock %}
</body>
</html>
