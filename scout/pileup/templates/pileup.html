{% extends 'layouts/base.html' %}

{% block css_style %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('pileup.static', filename='pileup.css') }}">
{% endblock %}

{% block body %}
    <div id="pileup-viewer"></div>
{% endblock %}

{% block js_btm %}
    {{ super()Â }}

    <script type="text/javascript" charset="utf-8">
        var div = document.getElementById('pileup-viewer');
        var p = pileup.create(div, {
          range: { contig: 'chr21', start: 43053191, stop: 43053291 },
          tracks: [
            {
              viz: pileup.viz.genome(),
              isReference: true,
              data: pileup.formats.twoBit({
                url: 'http://www.biodalliance.org/datasets/hg19.2bit'
              }),
              name: 'Reference'
            },
            {
              viz: pileup.viz.pileup(),
              data: pileup.formats.bam({
                url: '{{ url_for("browser.remote_static", file=bam_file) }}',
                indexUrl: '{{ url_for("browser.remote_static", file=(bam_file + ".bai")) }}'
              }),
              cssClass: 'normal',
              name: 'Alignments'
            }
          ]
        });
    </script>
{% endblock %}
